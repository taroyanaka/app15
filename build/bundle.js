var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function a(t){t.forEach(e)}function o(t){return"function"==typeof t}function i(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function c(t,e){t.appendChild(e)}function l(t,e,n){t.insertBefore(e,n||null)}function r(t){t.parentNode&&t.parentNode.removeChild(t)}function s(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function d(t){return document.createElement(t)}function u(t){return document.createTextNode(t)}function p(){return u(" ")}function g(){return u("")}function f(t,e,n,a){return t.addEventListener(e,n,a),()=>t.removeEventListener(e,n,a)}function h(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function _(t,e){e=""+e,t.data!==e&&(t.data=e)}function m(t,e){t.value=null==e?"":e}function v(t,e,n,a){null==n?t.style.removeProperty(e):t.style.setProperty(e,n,a?"important":"")}let y;function b(t){y=t}function $(t){(function(){if(!y)throw new Error("Function called outside component initialization");return y})().$$.on_mount.push(t)}const T=[],w=[];let x=[];const D=[],S=Promise.resolve();let C=!1;function E(t){x.push(t)}const k=new Set;let O=0;function j(){if(0!==O)return;const t=y;do{try{for(;O<T.length;){const t=T[O];O++,b(t),I(t.$$)}}catch(t){throw T.length=0,O=0,t}for(b(null),T.length=0,O=0;w.length;)w.pop()();for(let t=0;t<x.length;t+=1){const e=x[t];k.has(e)||(k.add(e),e())}x.length=0}while(T.length);for(;D.length;)D.pop()();C=!1,k.clear(),b(t)}function I(t){if(null!==t.fragment){t.update(),a(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(E)}}const N=new Set;function A(t,e){const n=t.$$;null!==n.fragment&&(!function(t){const e=[],n=[];x.forEach((a=>-1===t.indexOf(a)?e.push(a):n.push(a))),n.forEach((t=>t())),x=e}(n.after_update),a(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function P(t,e){-1===t.$$.dirty[0]&&(T.push(t),C||(C=!0,S.then(j)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function L(i,c,l,s,d,u,p,g=[-1]){const f=y;b(i);const h=i.$$={fragment:null,ctx:[],props:u,update:t,not_equal:d,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(c.context||(f?f.$$.context:[])),callbacks:n(),dirty:g,skip_bound:!1,root:c.target||f.$$.root};p&&p(h.root);let _=!1;if(h.ctx=l?l(i,c.props||{},((t,e,...n)=>{const a=n.length?n[0]:e;return h.ctx&&d(h.ctx[t],h.ctx[t]=a)&&(!h.skip_bound&&h.bound[t]&&h.bound[t](a),_&&P(i,t)),e})):[],h.update(),_=!0,a(h.before_update),h.fragment=!!s&&s(h.ctx),c.target){if(c.hydrate){const t=function(t){return Array.from(t.childNodes)}(c.target);h.fragment&&h.fragment.l(t),t.forEach(r)}else h.fragment&&h.fragment.c();c.intro&&((m=i.$$.fragment)&&m.i&&(N.delete(m),m.i(v))),function(t,n,i,c){const{fragment:l,after_update:r}=t.$$;l&&l.m(n,i),c||E((()=>{const n=t.$$.on_mount.map(e).filter(o);t.$$.on_destroy?t.$$.on_destroy.push(...n):a(n),t.$$.on_mount=[]})),r.forEach(E)}(i,c.target,c.anchor,c.customElement),j()}var m,v;b(f)}class V{$destroy(){A(this,1),this.$destroy=t}$on(e,n){if(!o(n))return t;const a=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return a.push(n),()=>{const t=a.indexOf(n);-1!==t&&a.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function W(t,e,n){const a=t.slice();return a[38]=e[n],a}function J(t,e,n){const a=t.slice();return a[38]=e[n],a}function z(t,e,n){const a=t.slice();return a[38]=e[n],a}function G(t,e,n){const a=t.slice();return a[45]=e[n],a}function M(t,e,n){const a=t.slice();return a[38]=e[n],a}function U(t){let e,n,o,i;return{c(){e=d("button"),n=u(t[8]),h(e,"id","errors"),v(e,"background","none"),v(e,"border","none"),v(e,"padding","0"),v(e,"margin","0"),v(e,"color","inherit"),v(e,"font","inherit"),v(e,"cursor","pointer")},m(a,r){l(a,e,r),c(e,n),o||(i=[f(e,"click",t[20]),f(e,"keydown",t[21])],o=!0)},p(t,e){256&e[0]&&_(n,t[8])},d(t){t&&r(e),o=!1,a(i)}}}function B(t){let e,n=t[10].allDescs,a=[];for(let e=0;e<n.length;e+=1)a[e]=K(G(t,n,e));return{c(){for(let t=0;t<a.length;t+=1)a[t].c();e=g()},m(t,n){for(let e=0;e<a.length;e+=1)a[e]&&a[e].m(t,n);l(t,e,n)},p(t,o){if(402432&o[0]){let i;for(n=t[10].allDescs,i=0;i<n.length;i+=1){const c=G(t,n,i);a[i]?a[i].p(c,o):(a[i]=K(c),a[i].c(),a[i].m(e.parentNode,e))}for(;i<a.length;i+=1)a[i].d(1);a.length=n.length}},d(t){s(a,t),t&&r(e)}}}function H(t){let e,n,a,o,i,s,g,m,v,y,b,$,T,w,x,D,S=t[38].id+"",C=t[38].desc_id+"",E=t[38].name+"";function k(){return t[24](t[38])}return{c(){e=d("div"),n=d("p"),a=u("id: "),o=u(S),i=p(),s=d("p"),g=u("desc_id: "),m=u(C),v=p(),y=d("p"),b=u("tag.name: "),$=u(E),T=p(),w=d("button"),w.textContent="delete_desc_tag",h(e,"class","desc_tag svelte-1sd4hgr")},m(t,r){l(t,e,r),c(e,n),c(n,a),c(n,o),c(e,i),c(e,s),c(s,g),c(s,m),c(e,v),c(e,y),c(y,b),c(y,$),c(e,T),c(e,w),x||(D=f(w,"click",k),x=!0)},p(e,n){t=e,1024&n[0]&&S!==(S=t[38].id+"")&&_(o,S),1024&n[0]&&C!==(C=t[38].desc_id+"")&&_(m,C),1024&n[0]&&E!==(E=t[38].name+"")&&_($,E)},d(t){t&&r(e),x=!1,D()}}}function K(t){let e,n,o,i,g,h,m,v,y,b,$,T,w,x,D,S,C,E,k,O,j,I,N,A,P,L,V,W=t[45].id+"",J=t[45].auth_uid.slice(0,10)+"",z=t[45].title+"",G=t[45].description+"";function U(){return t[22](t[45])}function B(){return t[23](t[45])}let K=t[45].tags,q=[];for(let e=0;e<K.length;e+=1)q[e]=H(M(t,K,e));return{c(){e=d("div"),n=d("p"),o=u("id: "),i=u(W),g=p(),h=d("button"),h.textContent="set_desc_data",m=p(),v=d("button"),v.textContent="delete_desc",y=p(),b=d("p"),$=u("auth_uid: "),T=u(J),w=u("..."),x=p(),D=d("p"),S=u("title: "),C=u(z),E=p(),k=d("p"),O=u("description: "),j=u(G),I=p(),N=d("div"),N.textContent="tags:",A=p();for(let t=0;t<q.length;t+=1)q[t].c();P=p()},m(t,a){l(t,e,a),c(e,n),c(n,o),c(n,i),c(e,g),c(e,h),c(e,m),c(e,v),c(e,y),c(e,b),c(b,$),c(b,T),c(b,w),c(e,x),c(e,D),c(D,S),c(D,C),c(e,E),c(e,k),c(k,O),c(k,j),c(e,I),c(e,N),c(e,A);for(let t=0;t<q.length;t+=1)q[t]&&q[t].m(e,null);c(e,P),L||(V=[f(h,"click",U),f(v,"click",B)],L=!0)},p(n,a){if(t=n,1024&a[0]&&W!==(W=t[45].id+"")&&_(i,W),1024&a[0]&&J!==(J=t[45].auth_uid.slice(0,10)+"")&&_(T,J),1024&a[0]&&z!==(z=t[45].title+"")&&_(C,z),1024&a[0]&&G!==(G=t[45].description+"")&&_(j,G),263168&a[0]){let n;for(K=t[45].tags,n=0;n<K.length;n+=1){const o=M(t,K,n);q[n]?q[n].p(o,a):(q[n]=H(o),q[n].c(),q[n].m(e,P))}for(;n<q.length;n+=1)q[n].d(1);q.length=K.length}},d(t){t&&r(e),s(q,t),L=!1,a(V)}}}function q(t){let e,n=t[10].allTags,a=[];for(let e=0;e<n.length;e+=1)a[e]=F(z(t,n,e));return{c(){for(let t=0;t<a.length;t+=1)a[t].c();e=g()},m(t,n){for(let e=0;e<a.length;e+=1)a[e]&&a[e].m(t,n);l(t,e,n)},p(t,o){if(1024&o[0]){let i;for(n=t[10].allTags,i=0;i<n.length;i+=1){const c=z(t,n,i);a[i]?a[i].p(c,o):(a[i]=F(c),a[i].c(),a[i].m(e.parentNode,e))}for(;i<a.length;i+=1)a[i].d(1);a.length=n.length}},d(t){s(a,t),t&&r(e)}}}function F(t){let e,n,a,o,i,s,g,f,h,m=t[38].id+"",v=t[38].name+"";return{c(){e=d("div"),n=d("p"),a=u("id: "),o=u(m),i=p(),s=d("p"),g=u("tag.name: "),f=u(v),h=p()},m(t,r){l(t,e,r),c(e,n),c(n,a),c(n,o),c(e,i),c(e,s),c(s,g),c(s,f),c(e,h)},p(t,e){1024&e[0]&&m!==(m=t[38].id+"")&&_(o,m),1024&e[0]&&v!==(v=t[38].name+"")&&_(f,v)},d(t){t&&r(e)}}}function Y(t){let e,n,a,o,i,s,p,g,f,m=t[38].id+"",v=t[38].desc_id+"",y=t[38].name+"";return{c(){e=u("id: "),n=u(m),a=u("\n\t\t\tdesc_id: "),o=u(v),i=u("\n\t\t\ttag.name: "),s=d("input"),g=d("p"),f=u(y),h(s,"type","text"),s.value=p=t[38].name},m(t,r){l(t,e,r),l(t,n,r),l(t,a,r),l(t,o,r),l(t,i,r),l(t,s,r),l(t,g,r),c(g,f)},p(t,e){128&e[0]&&m!==(m=t[38].id+"")&&_(n,m),128&e[0]&&v!==(v=t[38].desc_id+"")&&_(o,v),128&e[0]&&p!==(p=t[38].name)&&s.value!==p&&(s.value=p),128&e[0]&&y!==(y=t[38].name+"")&&_(f,y)},d(t){t&&r(e),t&&r(n),t&&r(a),t&&r(o),t&&r(i),t&&r(s),t&&r(g)}}}function Z(t){let e,n;return{c(){e=d("option"),e.__value=n=t[38].name,e.value=e.__value},m(t,n){l(t,e,n)},p(t,a){2&a[0]&&n!==(n=t[38].name)&&(e.__value=n,e.value=e.__value)},d(t){t&&r(e)}}}function Q(e){let n,o,i,g,v,y,b,$,T,w,x,D,S,C,E,k,O,j,I,N,A,P,L,V,z,G,M,H,K,F,Q,R,at,ot,it,ct,lt,rt,st,dt,ut,pt,gt,ft,ht,_t,mt,vt,yt,bt,$t,Tt,wt,xt,Dt,St,Ct,Et,kt,Ot,jt,It,Nt,At,Pt,Lt,Vt,Wt,Jt,zt,Gt,Mt,Ut,Bt,Ht,Kt,qt,Ft,Yt,Zt,Qt,Rt,Xt,te=e[11].slice(0,10)+"",ee=e[11].slice(0,10)+"",ne=e[8]&&U(e),ae=e[10].allDescs&&B(e),oe=e[10].allTags&&q(e),ie=e[7],ce=[];for(let t=0;t<ie.length;t+=1)ce[t]=Y(J(e,ie,t));let le=e[1],re=[];for(let t=0;t<le.length;t+=1)re[t]=Z(W(e,le,t));return{c(){n=d("div"),o=d("div"),i=d("h1"),i.textContent=`現在日時と時刻:\n\t\t${tt()}`,g=p(),v=d("div"),y=u("auth_login_result: "),b=d("span"),$=u(e[9]),T=p(),w=d("div"),x=u("auth_google_login: "),D=d("button"),D.textContent="auth_google_login",S=p(),C=d("button"),C.textContent="init_and_sample_insert",E=p(),k=d("button"),k.textContent="init_db",O=p(),j=d("button"),j.textContent="get_all_descs_and_tags",I=p(),N=d("div"),A=d("div"),P=d("div"),ne&&ne.c(),L=p(),V=d("p"),z=u("auth_uid: "),G=u(te),M=u("..."),H=p(),K=d("div"),F=d("h1"),F.textContent="Web Data Descs",Q=p(),ae&&ae.c(),R=p(),at=d("div"),ot=d("h1"),ot.textContent="Web Data Tags",it=p(),oe&&oe.c(),ct=p(),lt=d("div"),rt=d("h1"),rt.textContent="Web Data Edit",st=p(),dt=d("button"),dt.textContent="update_desc",ut=u("\n\t\t\n\t\tauth_user_id: "),pt=d("p"),pt.textContent=`${X}`,gt=u("\n\t\t\n\t\t \n\t\tauth_uid: "),ft=d("p"),ht=u(ee),_t=u("..."),mt=u("\n\t\tid: "),vt=d("input"),yt=d("p"),bt=u(e[2]),$t=u("\n\t\tcreated_at: "),Tt=d("input"),xt=d("p"),Dt=u(e[3]),St=u("\n\t\tupdated_at: "),Ct=d("input"),kt=d("p"),Ot=u(e[4]),jt=u("\n\t\ttitle: "),It=d("input"),Nt=d("p"),At=u(e[5]),Pt=u("\n\t\tdescription: "),Lt=d("input"),Vt=d("p"),Wt=u(e[6]),Jt=p(),zt=d("div"),zt.textContent="tags:",Gt=p();for(let t=0;t<ce.length;t+=1)ce[t].c();Mt=u("\t\t\t\t\n\t\t\t\t\n\t\t\t\ttagをdescに追加\n\t\t\t\t"),Ut=d("label"),Ut.textContent="all_tags",Bt=p(),Ht=d("input"),Kt=p(),qt=d("datalist");for(let t=0;t<re.length;t+=1)re[t].c();Ft=p(),Yt=d("button"),Yt.textContent="add_tag_to_desc",Zt=p(),Qt=d("main"),Qt.innerHTML='<h1 class="svelte-1sd4hgr">Hello app 15!</h1> \n\t<p>app8の派生をやる</p> \n\t<p>コードはtag_and_descriptionの流用</p> \n\t<p>具体的にはapp15はタグ管理できるシンプルなジョブボードを作る</p> \n\t<p>登録無料利用無料で30秒で出稿できる</p> \n\t<p>理由:自分に必要で自分以外の同業他社も必要としているため</p> \n\t<p>メイン機能:タグとdescriptionのみのデータ構造</p> \n\t<p>検索履歴をタグとして保存できる</p> \n\t<p>求職者のニーズをそのままタグとして明文化/定量化できる</p> \n\t<p>(タグを管理するメタタグが必要になるかも)</p> \n\t<p>検索履歴のタグ化は保留していったん作って使ってもらって意見吸い上げるフォームつけとく(とりあえずgoogle form)</p> \n\t<p>ver0.1は以上</p>',h(i,"class","svelte-1sd4hgr"),h(o,"class","header svelte-1sd4hgr"),h(P,"class","console"),h(F,"class","svelte-1sd4hgr"),h(K,"class","list"),h(ot,"class","svelte-1sd4hgr"),h(at,"class","list2"),h(A,"class","left-column server_side svelte-1sd4hgr"),h(rt,"class","svelte-1sd4hgr"),h(vt,"type","text"),vt.value=e[2],h(Tt,"type","datetime-local"),Tt.value=wt=nt(e[3]),h(Ct,"type","datetime-local"),Ct.value=Et=nt(e[4]),h(It,"type","text"),It.value=e[5],h(Lt,"type","text"),Lt.value=e[6],h(Ut,"for","my_all_tags"),h(Ht,"list","all_tags"),h(Ht,"id","my_all_tags"),h(Ht,"name","my_all_tags"),h(qt,"id","all_tags"),h(lt,"class","right-column svelte-1sd4hgr"),h(N,"class","content svelte-1sd4hgr"),h(n,"class","container svelte-1sd4hgr"),h(Qt,"class","svelte-1sd4hgr")},m(t,a){l(t,n,a),c(n,o),c(o,i),c(o,g),c(o,v),c(v,y),c(v,b),c(b,$),c(o,T),c(o,w),c(w,x),c(w,D),c(o,S),c(o,C),c(o,E),c(o,k),c(o,O),c(o,j),c(n,I),c(n,N),c(N,A),c(A,P),ne&&ne.m(P,null),c(P,L),c(P,V),c(V,z),c(V,G),c(V,M),c(A,H),c(A,K),c(K,F),c(K,Q),ae&&ae.m(K,null),c(A,R),c(A,at),c(at,ot),c(at,it),oe&&oe.m(at,null),c(N,ct),c(N,lt),c(lt,rt),c(lt,st),c(lt,dt),c(lt,ut),c(lt,pt),c(lt,gt),c(lt,ft),c(ft,ht),c(ft,_t),c(lt,mt),c(lt,vt),c(lt,yt),c(yt,bt),c(lt,$t),c(lt,Tt),c(lt,xt),c(xt,Dt),c(lt,St),c(lt,Ct),c(lt,kt),c(kt,Ot),c(lt,jt),c(lt,It),c(lt,Nt),c(Nt,At),c(lt,Pt),c(lt,Lt),c(lt,Vt),c(Vt,Wt),c(lt,Jt),c(lt,zt),c(lt,Gt);for(let t=0;t<ce.length;t+=1)ce[t]&&ce[t].m(lt,null);c(lt,Mt),c(lt,Ut),c(lt,Bt),c(lt,Ht),m(Ht,e[0]),c(lt,Kt),c(lt,qt);for(let t=0;t<re.length;t+=1)re[t]&&re[t].m(qt,null);c(lt,Ft),c(lt,Yt),l(t,Zt,a),l(t,Qt,a),Rt||(Xt=[f(D,"click",e[19]),f(C,"click",e[14]),f(k,"click",et),f(j,"click",e[15]),f(dt,"click",e[16]),f(Ht,"input",e[25]),f(Yt,"click",e[26])],Rt=!0)},p(t,e){if(512&e[0]&&_($,t[9]),t[8]?ne?ne.p(t,e):(ne=U(t),ne.c(),ne.m(P,L)):ne&&(ne.d(1),ne=null),2048&e[0]&&te!==(te=t[11].slice(0,10)+"")&&_(G,te),t[10].allDescs?ae?ae.p(t,e):(ae=B(t),ae.c(),ae.m(K,null)):ae&&(ae.d(1),ae=null),t[10].allTags?oe?oe.p(t,e):(oe=q(t),oe.c(),oe.m(at,null)):oe&&(oe.d(1),oe=null),2048&e[0]&&ee!==(ee=t[11].slice(0,10)+"")&&_(ht,ee),4&e[0]&&vt.value!==t[2]&&(vt.value=t[2]),4&e[0]&&_(bt,t[2]),8&e[0]&&wt!==(wt=nt(t[3]))&&(Tt.value=wt),8&e[0]&&_(Dt,t[3]),16&e[0]&&Et!==(Et=nt(t[4]))&&(Ct.value=Et),16&e[0]&&_(Ot,t[4]),32&e[0]&&It.value!==t[5]&&(It.value=t[5]),32&e[0]&&_(At,t[5]),64&e[0]&&Lt.value!==t[6]&&(Lt.value=t[6]),64&e[0]&&_(Wt,t[6]),128&e[0]){let n;for(ie=t[7],n=0;n<ie.length;n+=1){const a=J(t,ie,n);ce[n]?ce[n].p(a,e):(ce[n]=Y(a),ce[n].c(),ce[n].m(lt,Mt))}for(;n<ce.length;n+=1)ce[n].d(1);ce.length=ie.length}if(1&e[0]&&Ht.value!==t[0]&&m(Ht,t[0]),2&e[0]){let n;for(le=t[1],n=0;n<le.length;n+=1){const a=W(t,le,n);re[n]?re[n].p(a,e):(re[n]=Z(a),re[n].c(),re[n].m(qt,null))}for(;n<re.length;n+=1)re[n].d(1);re.length=le.length}},i:t,o:t,d(t){t&&r(n),ne&&ne.d(),ae&&ae.d(),oe&&oe.d(),s(ce,t),s(re,t),t&&r(Zt),t&&r(Qt),Rt=!1,a(Xt)}}}let R="http://localhost:8000",X=1;function tt(){const t=new Date,e=t.toLocaleTimeString();return t.toLocaleDateString()+" "+e}async function et(){try{const t=await fetch(R+"/init_db",{method:"POST",headers:{"Content-Type":"application/json"}}),e=await t.json();console.log(e)}catch(t){console.error("Error:",t)}}function nt(t){return t.slice(0,16)}function at(t,e,n){let a="";function o(t,e){try{const a=c.find((t=>t.name===e));if(a){a.desc_id=t;const e=p.some((t=>t.id==t.id));e||n(7,p=[...p,a])}else{const a={id:c.length+1,name:e,desc_id:t,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()};n(1,c=[...c,a]),n(7,p=[...p,a])}}catch(t){console.error("Error:",t)}}function i(t){try{const e=w.allDescs.find((e=>e.id===t));console.log(e.tags),e?(n(11,x=e.auth_uid),n(2,l=e.id),n(3,r=e.created_at),n(4,s=e.updated_at),n(5,d=e.title),n(6,u=e.description),n(7,p=e.tags)):console.error(`No description found with id: ${t}`)}catch(t){console.error("Error:",t)}}let c=[],l=null,r=(new Date).toISOString(),s=(new Date).toISOString(),d="",u="",p=[];const g=[{auth_uid:"user1",desc_id:1,created_at:"2024-09-01T00:00:00",updated_at:"2024-09-01T00:00:00",title:"foo1",description:"bar1",tags:[{desc_id:1,id:1,name:"tag1",created_at:"2024-09-01T00:00:00",updated_at:"2024-09-01T00:00:00"},{desc_id:1,id:2,name:"tag2",created_at:"2024-09-01T00:00:00",updated_at:"2024-09-01T00:00:00"},{desc_id:1,id:3,name:"tag3",created_at:"2024-09-01T00:00:00",updated_at:"2024-09-01T00:00:00"}]},{auth_uid:"user1",desc_id:2,created_at:"2024-09-01T00:00:00",updated_at:"2024-09-01T00:00:00",title:"foo2",description:"bar2",tags:[{desc_id:2,id:1,name:"tag1",created_at:"2024-09-01T00:00:00",updated_at:"2024-09-01T00:00:00"},{desc_id:2,id:2,name:"tag2",created_at:"2024-09-01T00:00:00",updated_at:"2024-09-01T00:00:00"}]},{auth_uid:"user2",desc_id:3,created_at:"2024-09-01T00:00:00",updated_at:"2024-09-01T00:00:00",title:"foo3",description:"bar3",tags:[{desc_id:3,id:2,name:"tag2",created_at:"2024-09-01T00:00:00",updated_at:"2024-09-01T00:00:00"},{desc_id:3,id:3,name:"tag3",created_at:"2024-09-01T00:00:00",updated_at:"2024-09-01T00:00:00"}]}];const f={validateAuthUid:t=>/^[a-zA-Z0-9_-]+$/.test(t),validateDescId:t=>Number.isInteger(t)&&t>0,validateISODate:t=>/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}$/.test(t),validateTitle:t=>"string"==typeof t&&t.length>=1&&t.length<=100,validateDescription:t=>"string"==typeof t&&t.length>=1&&t.length<=1e3,validateTagName:t=>"string"==typeof t&&t.length>=1&&t.length<=10,validateData(t){const{auth_uid:e,desc_id:n,created_at:a,updated_at:o,title:i,description:c,tags:l}=t;return{isAuthUidValid:this.validateAuthUid(e),isDescIdValid:this.validateDescId(n),isTitleValid:this.validateTitle(i),isDescriptionValid:this.validateDescription(c),areTagsValid:l.every((t=>this.validateTagName(t.name)))}}};function h(){const t={auth_uid:x,desc_id:l,created_at:r,updated_at:s,title:d,description:u,tags:p};n(8,b=[]);for(const[e,n]of Object.entries(f.validateData(t)))if(n||b.push(e),"tags"===e)for(const[t,e]of n.entries())for(const[n,a]of Object.entries(f.validateData(e)))a||b.push(`tags[${t}].${n}`);else"auth_uid"===e&&f.validateAuthUid(x),"desc_id"===e&&f.validateDescId(l),"created_at"===e&&f.validateISODate(r),"updated_at"===e&&f.validateISODate(s),"title"===e&&f.validateTitle(d),"description"===e&&f.validateDescription(u);return!(b.length>0)||(console.log(b),!1)}async function _(){try{if(!h())throw new Error("Validation failed");const t=await fetch("http://localhost:8000/insert_desc",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth_uid:x,created_at:r,updated_at:s,title:d,description:u,tags:p})}),e=await t.json();console.log(e)}catch(t){}}async function m(){try{const t=await fetch(R+"/",{method:"GET",headers:{"Content-Type":"application/json"}}),e=await t.json();n(10,w=e),n(1,c=e.allTags),console.log(e)}catch(t){console.error("Error:",t)}}async function v(t){try{const e=await fetch(R+"/delete_desc",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t,auth_uid:x})}),n=await e.json();console.log(n)}catch(t){console.error("Error:",t)}}async function y(t,e){try{console.log(t,e,x);const n=await fetch(R+"/delete_desc_tag",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t,desc_id:e,auth_uid:x})}),a=await n.json();console.log(a)}catch(t){console.error("Error:",t)}}let b=[],T="Not logged in",w=[];let x="user1a34efgh5678ijkl9012mnop";firebase.initializeApp({apiKey:"AIzaSyBcOlIDP2KWbJuKM0WeMHNp-WvjTVfLt9Y",authDomain:"p2auth-ea50a.firebaseapp.com",projectId:"p2auth-ea50a",storageBucket:"p2auth-ea50a.appspot.com",messagingSenderId:"796225429484",appId:"1:796225429484:web:ece56ef2fc0be28cd6eac9"});const D=new firebase.auth.GoogleAuthProvider;$((async()=>{tt(),await m(),await async function(){try{await new Promise(((t,e)=>{firebase.auth().onAuthStateChanged(t,e)}))||n(9,T="Not logged in"),n(9,T="Logged in")}catch(t){console.error("Error during authentication:",t),n(9,T="Authentication failed"),n(11,x="")}}()}));return(async()=>{tt()})(),[a,c,l,r,s,d,u,p,b,T,w,x,o,i,async function(){try{for(const t of g)n(11,x=t.auth_uid),n(2,l=t.desc_id),n(3,r=t.created_at),n(4,s=t.updated_at),n(5,d=t.title),n(6,u=t.description),n(7,p=t.tags),await _()}catch(t){console.error("Error:",t)}},m,async function(){try{if(console.log("fetch_update_desc"),console.log(x,l,r,s,d,u,p),!h())throw new Error("Validation failed");const t=await fetch(R+"/update_desc",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth_uid:x,desc_id:l,title:d,description:u,tags:p})}),e=await t.json();console.log(e)}catch(t){console.error("Error:",t)}},v,y,async function(){try{const t=(await firebase.auth().signInWithPopup(D)).user;n(9,T=`Logged in as: ${t.displayName}`)}catch(t){console.error("Error during Google login:",t),alert("Google login failed. "+t.message)}},()=>n(8,b=""),t=>{"Enter"!==t.key&&" "!==t.key||n(8,b="")},t=>i(t.id),t=>v(t.id),t=>y(t.id,t.desc_id),function(){a=this.value,n(0,a)},()=>o(l,a)]}return new class extends V{constructor(t){super(),L(this,t,at,Q,i,{},null,[-1,-1])}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
